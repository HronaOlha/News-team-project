{"mappings":"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","sources":["src/readPage.js","src/scripts/read.js","src/scripts/searchNewsFromReadStorage.js"],"sourcesContent":["import './scripts/current';\nimport './scripts/mobileMenu';\nimport './scripts/newsCardFromStorage';\nimport './scripts/read';\nimport './scripts/searchNewsFromReadStorage'\n","import { Report } from 'notiflix/build/notiflix-report-aio';\nimport { spinner } from './libraries';\nimport { addClassesForCoincidencesMarkupAndStoragePages } from './commonFunctions';\n\nconst cardList = document.getElementById('ul-gallery');\nconst spinnerContainer = document.querySelector('.spinner-container');\n\nonParse();\n\nfunction onParse() {\n  spinner.spin(document.body);\n  try {\n    const unparsed = localStorage.getItem('read more');\n    const parsed = JSON.parse(unparsed);\n\n    if (parsed === null) {\n      spinner.stop();\n      return;\n    } else if (parsed.length === 0) {\n      spinner.stop();\n      Report.info('There are no news You have read');\n    } else {\n      renderMarkup(parsed);\n      spinner.stop();\n    }\n  } catch (err) {\n    console.error(err);\n    spinner.stop();\n  }\n}\n\nfunction renderMarkup(array) {\n  let cardMarkup = '';\n\n  // -------сортируем даты по убыванию и выделяем уникальные даты---------\n\n  const initialDates = array.map(obj => obj.date);\n  const descendingDates = [...initialDates]\n    .sort((a, b) => b - a)\n    .map(dateUnix => {\n      const dateStamp = new Date(dateUnix);\n\n      return `${String(dateStamp.getDate()).padStart(2, 0)}/${String(\n        dateStamp.getMonth() + 1\n      ).padStart(2, 0)}/${String(dateStamp.getFullYear())}`;\n    });\n  const uniqueDates = descendingDates.filter(\n    (course, index, array) => array.indexOf(course) === index\n  );\n\n  //------- создаем массив объектов с датой в формате day/month/year---------\n\n  const arrayConverDates = array.reduce((acc, obj) => {\n    const newObj = {};\n    const dateStamp = new Date(obj.date);\n\n    newObj.date = `${String(dateStamp.getDate()).padStart(2, 0)}/${String(\n      dateStamp.getMonth() + 1\n    ).padStart(2, 0)}/${String(dateStamp.getFullYear())}`;\n    newObj.img = obj.img;\n    newObj.descr = obj.descr;\n    newObj.title = obj.title;\n    newObj.link = obj.link;\n    newObj.alt = obj.alt;\n    newObj.category = obj.category;\n    newObj.id = obj.id;\n    newObj.dateArticle = obj.dateArticle;\n\n    acc.push(newObj);\n    return acc;\n  }, []);\n\n  //------- рендерим разметку по отсортированным уникальным датам---------\n  spinner.spin(spinnerContainer);\n\n  for (let date of uniqueDates) {\n    // --------------рендер заголовка с датой прочтения новостей-----------------\n    const cardMarkupLi = `<li>\n            <div class=\"date-wrap\">\n                <p class=\"cards-date\">${date}\n                   <svg class=\"arrow-read\" width=\"15\" height=\"9\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                     <path d=\"M1.762 9 0 7.287 7.5 0 15 7.287 13.238 9 7.5 3.437 1.763 9Z\" fill=\"#111321\"/>\n                   </svg>\n                   <svg class=\"arrow-read visually-hidden\" width=\"15\" height=\"9\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                     <path d=\"M1.762 0 0 1.713 7.5 9 15 1.713 13.238 0 7.5 5.563 1.763 0Z\" fill=\"#111321\"/>\n                   </svg>\n                </p>\n                <div class=\"clicker\"></div>\n            </div>\n            <div class=\"news-item\">\n                <div class=\"news-wrap\">`;\n\n    // ---------------рендер карточек новостей согласно прочитанной дате в заголовке---------\n\n    const cardMarkupDiv = arrayConverDates\n      .filter(obj => obj.date === date)\n      .map(obj => {\n        return `<div class=\"news-card\" news-id=\"${obj.id}\">\n      <div class=\"news-card__img\">\n        <p class=\"news-card__theme\">${obj.category}</p>\n        <img\n          class=\"news-card__item\"\n          src=\"${obj.img}\"\n          alt=\"${obj.alt ? obj.alt : 'photo'}\"\n          loading=\"lazy\"\n          width=\"395\"\n        />\n        <div class=\"news-card__favorite\">\n        <button id ='${obj.id}' class=\"mybtn label-favorite\">Add to favorite</button>\n        </div>\n      </div>\n      <h2 class=\"news-card__info-title\">${obj.title.limit(50, {\n        ending: '',\n      })}</h2>\n      <p class=\"news-card__info-text\">${obj.descr.limit(120)}</p>\n      <div class=\"news-card__additional\">\n        <p class=\"news-card__date\">${obj.dateArticle}</p>\n        <a class=\"news-card__more\" href=\"${obj.link}\" id=\"${\n          obj.id\n        }\" target=\"_blank\" rel=\"noreferrer noopener\">Read more</a>\n      </div>\n    </div>`;\n      });\n    cardMarkup += cardMarkupLi + cardMarkupDiv.join('') + '</div></div></li>';\n  }\n  cardList.innerHTML = cardMarkup;\n\n  spinner.stop();\n\n  // --проставляю всем контейнерам с новостями высоту по занимаемому контенту-------------------------\n\n  document\n    .querySelectorAll('.news-item')\n    .forEach(el => (el.style.maxHeight = el.scrollHeight + 'px'));\n\n  // --делаю выпадающий список с новостями по датам - accordion-------------------\n  document.querySelectorAll('.cards-date').forEach(el =>\n    el.addEventListener('click', () => {\n      const svg = el.children;\n      for (let itemsvg of svg) itemsvg.classList.toggle('visually-hidden');\n\n      const newsItem = el.parentNode.nextElementSibling;\n      if (newsItem.style.maxHeight !== '0px') newsItem.style.maxHeight = '0px';\n      else newsItem.style.maxHeight = newsItem.scrollHeight + 'px';\n    })\n  );\n}\n\n// ---замена дат в хранилище \"read more\" на случайные---\n\n// const clicker = document.querySelector('.clicker');\n// clicker.addEventListener('click', onClick);\n\n// function getRandomIntInclusive(min, max) {\n//   min = Math.ceil(min);\n//   max = Math.floor(max);\n//   return Math.floor(Math.random() * (max - min + 1)) + min;\n// }\n\n// function onClick() {\n//   try {\n//     const unparsed = localStorage.getItem('read more');\n//     const parsed = JSON.parse(unparsed);\n\n//     if (parsed === null) return;\n//     else if (parsed.length === 0)\n//       Report.info('There are no news You have read');\n//     else {\n//       const arrayChangedDates = parsed.reduce((acc, obj) => {\n//         const newObj = {};\n//         const i = getRandomIntInclusive(1, 9) * 86400000;\n\n//         newObj.date = obj.date - i;\n//         newObj.img = obj.img;\n//         newObj.descr = obj.descr;\n//         newObj.title = obj.title;\n//         newObj.link = obj.link;\n//         newObj.alt = obj.alt;\n//         newObj.category = obj.category;\n//         newObj.id = obj.id;\n//         newObj.dateArticle = obj.dateArticle;\n//         acc.push(newObj);\n//         // i += 1;\n//         return acc;\n//       }, []);\n\n//       renderMarkup(arrayChangedDates);\n//     }\n//   } catch (err) {\n//     console.error(err);\n//   }\n// }\n\naddClassesForCoincidencesMarkupAndStoragePages();\n","import {\n  getStorageList,\n  deleteNoFoundMess,\n  renderNoFoundMess,\n} from './commonFunctions';\n\n// const inputEl = document.querySelector('.search-input');\nconst formEl = document.getElementById('search-form');\n\nconst galleryEl = document.querySelector('.gallery-container');\n\nformEl.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  deleteNoFoundMess();\n  const searchValue = e.target.elements.searchQuery.value;\n\n  const arr = getStorageList('read more');\n\n  const newArrObj = arr.filter(\n    obj =>\n      obj.descr.toLowerCase().includes(searchValue.toLowerCase().trim()) ||\n      obj.category.toLowerCase().includes(searchValue.toLowerCase().trim()) ||\n      obj.title.toLowerCase().includes(searchValue.toLowerCase().trim())\n  );\n\n  if (newArrObj.length > 0) {\n    render(newArrObj);\n  } else {\n    renderNoFoundMess();\n  }\n}\n\nfunction render(arr) {\n  const markUp = arr.reduce((acc, el) => {\n    acc += `<div class=\"news-card\" style=\"padding-top: 100px;\" news-id=\"${\n      el.id\n    }\">\n      <div class=\"news-card__img\">\n        <p class=\"news-card__theme\">${el.category}</p>\n        <img\n          class=\"news-card__item\"\n          src=\"${el.img}\"\n          alt=\"${el.alt ? el.alt : 'photo'}\"\n          loading=\"lazy\"\n          width=\"395\"\n        />\n        <div class=\"news-card__favorite\">\n        <button id ='${\n          el.id\n        }' class=\"mybtn label-favorite\">Add to favorite</button>\n        </div>\n      </div>\n      <h2 class=\"news-card__info-title\">${el.title}</h2>\n      <p class=\"news-card__info-text\">${el.descr.limit(180)}</p>\n      <div class=\"news-card__additional\">\n        <p class=\"news-card__date\">${el.dateArticle}</p>\n        <a class=\"news-card__more\" href=\"${el.link}\" id=\"${\n      el.id\n    }\" target=\"_blank\" rel=\"noreferrer noopener\"}>Read more</a>\n      </div>\n    </div>`;\n    return acc;\n  }, ``);\n  // console.log(markUp)\n  galleryEl.innerHTML = markUp;\n}\n"],"names":["parcelRequire","$8nrFW","$bc906c51ae0d70c1$var$cardList","document","getElementById","$bc906c51ae0d70c1$var$spinnerContainer","querySelector","$bpdv1","spinner","spin","body","unparsed","localStorage","getItem","parsed","JSON","parse","stop","length","$fivgP","Report","info","array1","cardMarkup","initialDates","map","obj","date","uniqueDates","$parcel$interopDefault","sort","a","b","dateUnix","dateStamp","Date","concat","String","getDate","padStart","getMonth","getFullYear","filter","course","index","array","indexOf","arrayConverDates","reduce","acc","newObj","img","descr","title","link","alt","category","id","dateArticle","push","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","undefined","_step1","_step","value","cardMarkupLi","cardMarkupDiv","limit","ending","join","_iterator","Symbol","iterator","next","done","_loop","err1","return","innerHTML","querySelectorAll","forEach","el","style","maxHeight","scrollHeight","addEventListener","svg","children","_iteratorNormalCompletion","_didIteratorError","_iteratorError","classList","toggle","err","newsItem","parentNode","nextElementSibling","$bc906c51ae0d70c1$var$renderMarkup","console","error","$bc906c51ae0d70c1$var$onParse","$79A4R","addClassesForCoincidencesMarkupAndStoragePages","$3b49b67af219d827$var$formEl","$3b49b67af219d827$var$galleryEl","e","preventDefault","deleteNoFoundMess","searchValue","target","elements","searchQuery","newArrObj","getStorageList","toLowerCase","includes","trim","arr","markUp","$3b49b67af219d827$var$render","renderNoFoundMess"],"version":3,"file":"read.a7242f26.js.map"}